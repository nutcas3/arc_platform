<% content_for :title, 'Learning Materials' %>
<% content_for(:description, "A list of ruby and ruby on rails learning resources compiled by the ARC community") %>

<div class="grid pt-20 px-4 md:px-10 lg:px-32 mx-auto place-content-center">

  <h1 class="text-4xl pt-6 pb-6 font-bold">Learning Materials</h1>

  <div class="mb-6">
    <%= form_with url: learning_materials_path, method: :get, local: true, class: 'grid grid-cols-1 md:grid-cols-6 gap-4' do %>
      <div class="md:col-span-4">
        <%= text_field_tag :q, @q, placeholder: 'Search materials (e.g., Rails, Ruby, Active Record, Hotwire)', class: 'input input-bordered w-full', id: 'q' %>
      </div>
      <div>
        <%= select_tag :level, options_for_select([['All Levels', ''], ['Beginner', 'beginner'], ['Intermediate', 'intermediate'], ['Expert', 'expert']], @level), class: 'select select-bordered w-full', id: 'level' %>
      </div>
      <div>
        <%= submit_tag 'Search', class: 'btn btn-primary w-full' %>
      </div>
    <% end %>
  </div>

  <hr>

  <% if @featured_materials.any? %>
    <section class="mt-10 mb-10 pb-10 border-b border-gray-300">
      <h2 class="text-3xl font-bold text-red-600 mb-6">Featured</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4">
        <% @featured_materials.each do |m| %>
          <div class="card bg-base-100 shadow-md overflow-hidden w-full transition-transform duration-300 hover:-translate-y-1 hover:shadow-xl">
            <% if m.thumbnail_url.present? %>
              <figure class="w-full aspect-[4/3] max-h-40 overflow-hidden">
                <img src="<%= m.thumbnail_url %>" alt="<%= m.title %> thumbnail" class="w-full h-full object-cover transition-transform duration-300 ease-out hover:scale-105">
              </figure>
            <% end %>
            <div class="card-body p-2">
              <span class="badge badge-secondary capitalize w-fit text-[10px]"><%= m.level %></span>
              <h3 class="card-title text-lg text-black mt-1"><%= m.title %></h3>
              <div class="card-actions justify-start mt-2">
                <%= link_to 'Open resource', m.link_url, class: 'link link-primary text-sm transition-colors duration-200 hover:underline', target: '_blank', rel: 'noopener' %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </section>
  <% end %>

  <section class="mb-6">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"> <!-- slightly bigger gap -->
      <% @materials.each_with_index do |m, i| %>
        <div class="pb-6 border-b border-dotted border-gray-300 w-full max-w-md"> <!-- from sm â†’ md -->
          <div class="card bg-base-100 shadow-md overflow-hidden w-full max-w-md transition-transform duration-300 hover:-translate-y-1 hover:shadow-xl"> <!-- slightly larger card -->
            <% if m.thumbnail_url.present? %>
              <figure class="w-full aspect-video max-h-48 overflow-hidden"> <!-- a little taller thumbnail -->
                <img src="<%= m.thumbnail_url %>" alt="<%= m.title %> thumbnail" class="w-full h-full object-cover transition-transform duration-300 ease-out hover:scale-105">
              </figure>
            <% end %>
            <div class="card-body p-3 md:p-4"> <!-- slightly more breathing room -->
              <span class="badge badge-ghost capitalize w-fit text-xs md:text-sm"><%= m.level %></span>
              <h3 class="card-title text-base mt-1"><%= m.title %></h3>
              <div class="card-actions justify-start mt-2">
                <%= link_to 'Open resource', m.link_url, class: 'link link-primary text-sm transition-colors duration-200 hover:underline', target: '_blank', rel: 'noopener' %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>

  </section>

</div>